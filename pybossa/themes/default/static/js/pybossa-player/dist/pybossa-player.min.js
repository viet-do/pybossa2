(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _html=require("./players/html5");var _html2=_interopRequireDefault(_html);var _vimeo=require("./players/vimeo");var _vimeo2=_interopRequireDefault(_vimeo);var _youtube=require("./players/youtube");var _youtube2=_interopRequireDefault(_youtube);var _soundcloud=require("./players/soundcloud");var _soundcloud2=_interopRequireDefault(_soundcloud);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function injectCss(){var css=".responsivePlayer {position: relative;padding-bottom: 56.25%;padding-top: 60px;overflow: hidden;} .responsivePlayer iframe {position: absolute;top: 0;left: 0;width: 100%;height: 100%;}";var head=document.head||document.getElementsByTagName("head")[0];var style=document.createElement("style");style.type="text/css";style.id="pybossa-player-styles";if(!document.getElementById("pybossa-player-styles")){if(style.styleSheet){style.styleSheet.cssText=css}else{style.appendChild(document.createTextNode(css))}head.appendChild(style)}}var PybossaPlayer=function PybossaPlayer(mediaUrl,containerId,isAudio){var player;if(isVimeoLink(mediaUrl)){player=(0,_vimeo2.default)()}else if(isYoutubeLink(mediaUrl)){player=(0,_youtube2.default)()}else if(isSoundcloudLink(mediaUrl)){player=(0,_soundcloud2.default)()}else{player=(0,_html2.default)(isAudio)}function isYoutubeLink(link){return(0,_youtube2.default)().isYoutubeLink(link)}function isVimeoLink(link){return link.indexOf("vimeo")!==-1}function isSoundcloudLink(link){return link.indexOf("soundcloud")!==-1}player.init(mediaUrl,containerId);injectCss();function play(){player.play()}function pause(){player.pause()}function destroy(){player.destroy()}function paused(){return player.paused()}function duration(){return player.duration()}function currentTime(){return player.currentTime()}function setCurrentTime(time){player.setCurrentTime(time)}function ended(){return player.ended()}function volume(){return player.volume()}function setVolume(volume){player.setVolume(volume)}function muted(){return player.muted()}function mute(){player.mute()}function unmute(){player.unmute()}function onReady(callback){player.onReady(callback)}function onPlay(callback){player.onPlay(callback)}function onPause(callback){player.onPause(callback)}function onPlayTimeChange(callback){player.onPlayTimeChange(callback)}function onEnded(callback){player.onEnded(callback)}return{play:play,pause:pause,destroy:destroy,paused:paused,duration:duration,currentTime:currentTime,setCurrentTime:setCurrentTime,ended:ended,volume:volume,setVolume:setVolume,muted:muted,mute:mute,unmute:unmute,onReady:onReady,onPlay:onPlay,onPause:onPause,onPlayTimeChange:onPlayTimeChange,onEnded:onEnded}};exports.default=PybossaPlayer;(function(){if(window){window.PybossaPlayer=PybossaPlayer}})()},{"./players/html5":2,"./players/soundcloud":3,"./players/vimeo":4,"./players/youtube":5}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var Html5Player=function Html5Player(isAudio){var player=undefined;function init(url,containerId){var element=isAudio?"audio":"video";player=document.createElement(element);player.setAttribute("src",url);player.setAttribute("width","100%");player.setAttribute("height","auto");player.setAttribute("controls",true);document.getElementById(containerId).appendChild(player)}function play(){player.play()}function pause(){player.pause()}function destroy(){player.remove()}function paused(){return player.paused}function duration(){if(isNaN(player.duration))return 0;return player.duration}function currentTime(){return player.currentTime}function setCurrentTime(time){player.currentTime=time}function ended(){return player.ended}function volume(){return player.volume}function setVolume(volume){player.volume=volume}function muted(){return player.muted}function mute(){player.muted=true}function unmute(){player.muted=false}function onReady(callback){player.addEventListener("loadedmetadata",callback)}function onPlay(callback){player.addEventListener("playing",callback)}function onPause(callback){player.addEventListener("pause",callback)}function onPlayTimeChange(callback){var onPlayTimeChangeCb=function onPlayTimeChangeCb(){callback(currentTime())};player.addEventListener("timeupdate",onPlayTimeChangeCb)}function onEnded(callback){player.addEventListener("ended",callback)}return{init:init,play:play,pause:pause,destroy:destroy,paused:paused,duration:duration,currentTime:currentTime,setCurrentTime:setCurrentTime,ended:ended,volume:volume,setVolume:setVolume,muted:muted,mute:mute,unmute:unmute,onReady:onReady,onPlay:onPlay,onPause:onPause,onPlayTimeChange:onPlayTimeChange,onEnded:onEnded}};exports.default=Html5Player},{}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var SoundcloudPlayer=function SoundcloudPlayer(){var player=undefined,_volume=1,_duration=0,_currentTime=0,_paused=true,_volumeBeforeMuting=1,onReadyCallback=function onReadyCallback(){},playerContainer=document.createElement("div");function init(audioUrl,containerId){loadApi(createPlayer.bind(this,audioUrl,containerId))}function createPlayer(audioUrl,containerId){var baseUrl="https://w.soundcloud.com/player/?url=";var iframe=document.createElement("iframe");iframe.setAttribute("src",baseUrl+audioUrl);iframe.setAttribute("width","100%");iframe.setAttribute("scrolling","no");iframe.setAttribute("frameborder","no");player=SC.Widget(iframe);player.bind(SC.Widget.Events.READY,preparePlayer);playerContainer.appendChild(iframe);document.getElementById(containerId).appendChild(playerContainer)}function loadApi(onload){var script=document.createElement("script");script.setAttribute("id","sc-iframe-api");script.onload=onload;script.src="https://w.soundcloud.com/player/api.js";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(script,firstScriptTag)}function preparePlayer(){player.isPaused(function(paused){_paused=paused});player.getDuration(function(duration){_duration=duration/1e3;onReadyCallback()});player.getVolume(function(volume){_volume=volume});player.bind(SC.Widget.Events.PLAY,function(data){_paused=false});player.bind(SC.Widget.Events.PAUSE,function(data){_paused=true});player.bind(SC.Widget.Events.SEEK,function(data){_currentTime=data/1e3});player.bind(SC.Widget.Events.PLAY_PROGRESS,function(data){_currentTime=data.currentPosition/1e3})}function play(){player.play()}function pause(){player.pause()}function destroy(){if(player){player.unbind(SC.Widget.Events.READY);player.unbind(SC.Widget.Events.PLAY);player.unbind(SC.Widget.Events.PAUSE);player.unbind(SC.Widget.Events.SEEK);player.unbind(SC.Widget.Events.PLAY_PROGRESS);player.unbind(SC.Widget.Events.FINISH)}playerContainer.remove();document.getElementById("sc-iframe-api").remove();delete window.SC}function paused(){return _paused}function duration(){return _duration}function currentTime(){return _currentTime}function setCurrentTime(time){if(_currentTime===0){play();pause()}player.seekTo(time*1e3);_currentTime=time}function ended(){return currentTime()===duration()&&duration()!==0}function volume(){return _volume}function setVolume(vol){player.setVolume(vol);_volume=vol}function muted(){return volume()===0}function mute(){_volumeBeforeMuting=volume();setVolume(0)}function unmute(){setVolume(_volumeBeforeMuting)}function onReady(callback){onReadyCallback=callback}function onPlay(callback){player.bind(SC.Widget.Events.PLAY,callback)}function onPause(callback){player.bind(SC.Widget.Events.PAUSE,callback)}function onPlayTimeChange(callback){player.bind(SC.Widget.Events.PLAY_PROGRESS,function(data){callback(data.currentPosition/1e3)})}function onEnded(callback){player.bind(SC.Widget.Events.FINISH,callback)}return{init:init,play:play,pause:pause,destroy:destroy,paused:paused,duration:duration,currentTime:currentTime,setCurrentTime:setCurrentTime,ended:ended,volume:volume,setVolume:setVolume,muted:muted,mute:mute,unmute:unmute,onReady:onReady,onPlay:onPlay,onPause:onPause,onPlayTimeChange:onPlayTimeChange,onEnded:onEnded}};exports.default=SoundcloudPlayer},{}],4:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var VimeoPlayer=function VimeoPlayer(){var player=undefined,playerContainer=undefined,onReadyCallback=function onReadyCallback(){};function init(videoUrl,containerId){var vimeoApi=function(){function Froogaloop(iframe){return new Froogaloop.fn.init(iframe)}var eventCallbacks={},hasWindowEvent=false,isReady=false,slice=Array.prototype.slice,playerOrigin="*";Froogaloop.fn=Froogaloop.prototype={element:null,init:function init(iframe){if(typeof iframe==="string"){iframe=document.getElementById(iframe)}this.element=iframe;return this},api:function api(method,valueOrCallback){if(!this.element||!method){return false}var self=this,element=self.element,target_id=element.id!==""?element.id:null,params=!isFunction(valueOrCallback)?valueOrCallback:null,callback=isFunction(valueOrCallback)?valueOrCallback:null;if(callback){storeCallback(method,callback,target_id)}postMessage(method,params,element);return self},addEvent:function addEvent(eventName,callback){if(!this.element){return false}var self=this,element=self.element,target_id=element.id!==""?element.id:null;storeCallback(eventName,callback,target_id);if(eventName!="ready"){postMessage("addEventListener",eventName,element)}else if(eventName=="ready"&&isReady){callback.call(null,target_id)}return self},removeEvent:function removeEvent(eventName){if(!this.element){return false}var self=this,element=self.element,target_id=element.id!==""?element.id:null,removed=removeCallbacks(eventName,target_id);if(eventName!="ready"&&removed){postMessage("removeEventListener",eventName,element)}}};function postMessage(method,params,target){if(!target.contentWindow.postMessage){return false}var data=JSON.stringify({method:method,value:params});target.contentWindow.postMessage(data,playerOrigin)}function onMessageReceived(event){var data=undefined,method=undefined;try{data=JSON.parse(event.data);method=data.event||data.method}catch(e){}if(method=="ready"&&!isReady){isReady=true}if(!/^https?:\/\/player.vimeo.com/.test(event.origin)){return false}if(playerOrigin==="*"){playerOrigin=event.origin}var value=data.value,eventData=data.data,target_id=target_id===""?null:data.player_id,callbacks=getCallbacks(method,target_id),params=[];if(!callbacks){return false}if(value!==undefined){params.push(value)}if(eventData){params.push(eventData)}if(target_id){params.push(target_id)}callbacks.forEach(function(callback){params.length>0?callback.apply(null,params):callback.call()})}function storeCallback(eventName,callback,target_id){if(target_id){if(!eventCallbacks[target_id]){eventCallbacks[target_id]={}}if(!eventCallbacks[target_id][eventName]){eventCallbacks[target_id][eventName]=[]}eventCallbacks[target_id][eventName].push(callback)}else{if(!eventCallbacks[eventName]){eventCallbacks[eventName]=[]}eventCallbacks[eventName].push(callback)}}function getCallbacks(eventName,target_id){if(target_id&&eventCallbacks[target_id]){return eventCallbacks[target_id][eventName]}else{return eventCallbacks[eventName]}}function removeCallbacks(eventName,target_id){if(target_id&&eventCallbacks[target_id]){if(!eventCallbacks[target_id][eventName]){return false}eventCallbacks[target_id][eventName]=null}else{if(!eventCallbacks[eventName]){return false}eventCallbacks[eventName]=null}return true}function isFunction(obj){return!!(obj&&obj.constructor&&obj.call&&obj.apply)}function isArray(obj){return toString.call(obj)==="[object Array]"}Froogaloop.fn.init.prototype=Froogaloop.fn;if(window.addEventListener){window.addEventListener("message",onMessageReceived,false)}else{window.attachEvent("onmessage",onMessageReceived)}return Froogaloop}();this.baseUrl="https://player.vimeo.com/video/";this.videoId=videoUrl.split("//player.vimeo.com/video/")[1];this.iframe=document.createElement("iframe");var playerId="vimeo-"+Date.now();this.iframe.id=playerId;this.iframe.setAttribute("src",this.baseUrl+this.videoId+"?api=1&player_id="+playerId);this.iframe.setAttribute("frameborder","0");this.iframe.setAttribute("scrolling","no");player=vimeoApi(this.iframe);playerContainer=document.createElement("div");playerContainer.setAttribute("class","responsivePlayer");playerContainer.appendChild(this.iframe);document.getElementById(containerId).appendChild(playerContainer);player.addEvent("ready",preparePlayer)}var _volume=1,_duration=0,_currentTime=0,_paused=true,_volumeBeforeMuting=1;function preparePlayer(){player.addEvent("pause",function(){_paused=true});player.addEvent("play",function(){_paused=false});player.addEvent("playProgress",function(value){_currentTime=value.seconds});player.addEvent("seek",function(value){_currentTime=value.seconds});player.api("getVolume",function(value){_volume=value});player.api("getDuration",function(value){_duration=value;onReadyCallback()})}function play(){_paused=false;player.api("play")}function pause(){_paused=true;player.api("pause")}function destroy(){player.removeEvent("ready");player.removeEvent("play");player.removeEvent("pause");player.removeEvent("playProgress");player.removeEvent("seek");playerContainer.remove()}function paused(){return _paused}function duration(){return _duration}function currentTime(){return _currentTime}function setCurrentTime(time){if(time<=_duration)_currentTime=time;var wasPaused=paused();player.api("seekTo",time);if(wasPaused)pause()}function ended(){return currentTime()===duration()}function volume(){return _volume}function setVolume(vol){player.api("setVolume",vol);if(vol<=1&&vol>=0)_volume=vol}function muted(){return volume()===0}function mute(){_volumeBeforeMuting=volume();setVolume(0)}function unmute(){setVolume(_volumeBeforeMuting)}function onReady(callback){onReadyCallback=callback}function onPlay(callback){player.addEvent("ready",function(){player.addEvent("play",function(){callback()})})}function onPause(callback){player.addEvent("ready",function(){player.addEvent("pause",function(){callback()})})}function onPlayTimeChange(callback){player.addEvent("ready",function(){player.addEvent("playProgress",function(data){callback(data.seconds)})})}function onEnded(callback){player.addEvent("ready",function(){player.addEvent("finish",function(){callback()})})}return{init:init,play:play,pause:pause,destroy:destroy,paused:paused,duration:duration,currentTime:currentTime,setCurrentTime:setCurrentTime,ended:ended,volume:volume,setVolume:setVolume,muted:muted,mute:mute,unmute:unmute,onReady:onReady,onPlay:onPlay,onPause:onPause,onPlayTimeChange:onPlayTimeChange,onEnded:onEnded}};exports.default=VimeoPlayer},{}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var YoutubePlayer=function YoutubePlayer(){var player=undefined,onReadyCallback=function onReadyCallback(){},onPlayCallback=function onPlayCallback(){},onPauseCallback=function onPauseCallback(){},onPlayTimeChangeCallback=function onPlayTimeChangeCallback(){},onEndedCallback=function onEndedCallback(){},playerContainerId="youtube-container-"+Date.now(),timeUpdateInterval=undefined,playerReady=false,playerContainer=undefined;function init(videoUrl,containerId){var div=document.createElement("div");div.setAttribute("id",playerContainerId);playerContainer=document.createElement("div");playerContainer.setAttribute("class","responsivePlayer");playerContainer.appendChild(div);document.getElementById(containerId).appendChild(playerContainer);var iFrameApiTag=document.getElementById("yt-iframe-api");if(iFrameApiTag){var createNewPlayer=function createNewPlayer(){createPlayer(videoUrl);delete window.onPreviousPlayerDestroyed};window.onPreviousPlayerDestroyed=createNewPlayer;createNewPlayer();delete window.onYouTubeIframeAPIReady}else{window.onYouTubeIframeAPIReady=function(){createPlayer(videoUrl)};loadApi()}}function createPlayer(videoUrl){var videoId=extractVideoId(videoUrl);player=new YT.Player(playerContainerId,{width:"100%",videoId:videoId,events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange}})}function extractVideoId(videoUrl){return matchYoutubeLink(videoUrl)[1]}function isYoutubeLink(link){return matchYoutubeLink(link)!==null}function matchYoutubeLink(link){var rx=/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/)|(?:(?:watch)?\?v(?:i)?=|\&v(?:i)?=))([^#\&\?]*).*/;var r=link.match(rx);return r}function onPlayerReady(){playerReady=true;onReadyCallback()}function onPlayerStateChange(event){var state=event.data;if(state===1){onPlayCallback();return}if(state===2){onPauseCallback();return}if(state===0){onEndedCallback();return}}function loadApi(){var script=document.createElement("script");script.setAttribute("id","yt-iframe-api");script.src="https://www.youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(script,firstScriptTag)}function play(){player.playVideo()}function pause(){player.pauseVideo()}function destroy(){player.destroy();document.getElementById(playerContainerId).remove();playerContainer.remove();if(window.onPreviousPlayerDestroyed){window.onPreviousPlayerDestroyed();delete window.onPreviousPlayerDestroyed}clearInterval(timeUpdateInterval)}function paused(){return player.getPlayerState()!==1}function duration(){if(!playerReady)return 0;return player.getDuration()}function currentTime(){if(!playerReady)return 0;return player.getCurrentTime()}function setCurrentTime(time){var wasPaused=paused();player.seekTo(time);if(wasPaused)pause()}function ended(){return player.getPlayerState()===0}function volume(){return player.getVolume()/100}function setVolume(volume){player.setVolume(volume*100)}function muted(){return player.isMuted()}function mute(){player.mute()}function unmute(){player.unMute()}function onReady(callback){if(playerReady){callback();return}onReadyCallback=callback}function onPlay(callback){onPlayCallback=callback}function onPause(callback){onPauseCallback=callback}function onPlayTimeChange(callback){onPlayTimeChangeCallback=callback;var onTimeChange=function onTimeChange(){var time=currentTime();if(!paused())onPlayTimeChangeCallback(time)};timeUpdateInterval=setInterval(onTimeChange,200)}function onEnded(callback){onEndedCallback=callback}return{init:init,play:play,pause:pause,destroy:destroy,paused:paused,duration:duration,currentTime:currentTime,setCurrentTime:setCurrentTime,ended:ended,volume:volume,setVolume:setVolume,muted:muted,mute:mute,unmute:unmute,onReady:onReady,onPlay:onPlay,onPause:onPause,onPlayTimeChange:onPlayTimeChange,onEnded:onEnded,isYoutubeLink:isYoutubeLink}};exports.default=YoutubePlayer},{}]},{},[1]);